"use strict";(self.webpackChunkdesktop=self.webpackChunkdesktop||[]).push([[430],{2943:function(e,s,t){t(2791);s.Z=t.p+"static/media/plus.d7e440a9053b85ca748298a1f4aee1b2.svg"},2493:function(e,s,t){t.d(s,{D:function(){return a}});var n=t(184),a=function(){return(0,n.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,n.jsxs)("div",{className:"flex gap-1",children:[(0,n.jsx)("div",{className:"ball rounded-full w-[5px] h-[5px]"}),(0,n.jsx)("div",{className:"ball rounded-full w-[5px] h-[5px]"}),(0,n.jsx)("div",{className:"ball rounded-full w-[5px] h-[5px]"})]}),(0,n.jsx)("div",{className:"font-normal text-sm text-side-300",children:"typing..."})]})}},7905:function(e,s,t){t.d(s,{n:function(){return i}});var n=t(1925),a=t(3528),r=t(184),i=function(e){var s=e.img,t=e.is_online;return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("img",{src:s?n.v+s:a,className:"w-12 h-12 rounded-full object-cover   ",alt:"avatar"}),t&&(0,r.jsx)("div",{className:"absolute w-3 h-3 bg-panel-200 rounded-full left-9 bottom-[1px]  border-[1px] stroke-[#1C1C23] shadow-lg "}),"    "]})}},4122:function(e,s,t){t.d(s,{C:function(){return a},T:function(){return r}});var n=t(4420),a=n.v9,r=function(){return(0,n.I0)()}},6430:function(e,s,t){t.r(s),t.d(s,{MainLayouts:function(){return W}});var n=t(9439),a=t(2791),r=(t(7088),t(3321));var i=t.p+"static/media/new_message.d6a95b006528882cbbd259871de6d19b.svg",l=t(7905);var c=t.p+"static/media/read.acf31a63063f67e9417fdee213c14c64.svg",o=(t(2493),t(4122)),d=t(184),u=function(e){var s,t,n,a,r,i,u,f,m,v,x,p,h,g,j=e.IsRead,N=e.IsNew,b=e.IsPean,w=(e.IsTyping,e.chat),y=(0,o.C)((function(e){return e.auth})),C=function(){return null===w||void 0===w?void 0:w.users.filter((function(e){return e.id!==y.id}))[0]};return(0,d.jsxs)("div",{className:"w-full bg-transparent  flex  items-center justify-start gap-2  box-border h-fit   cursor-pointer  ",children:[(0,d.jsx)("div",{className:"w-1/6",children:(0,d.jsx)(l.n,{img:function(){var e,s,t=null===w||void 0===w||null===(e=w.users.filter((function(e){return e.id!==y.id}))[0].profile)||void 0===e?void 0:e.avatar;return t?null===(s=t[(null===t||void 0===t?void 0:t.length)-1])||void 0===s?void 0:s.image:""}()})}),(0,d.jsxs)("div",{className:"flex flex-col justify-between gap-1 w-5/6 box-border  ",children:[j?(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsxs)("div",{className:"font-normal text-base text-primary-500",children:[null===(s=C())||void 0===s||null===(t=s.profile)||void 0===t?void 0:t.name," ",null===(n=C())||void 0===n||null===(a=n.profile)||void 0===a?void 0:a.surname]}),(0,d.jsx)("img",{src:c,alt:"readt svg icon"})]}):N?(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsxs)("div",{className:"font-normal text-base text-primary-500",children:[null===(r=C())||void 0===r||null===(i=r.profile)||void 0===i?void 0:i.name," ",null===(u=C())||void 0===u||null===(f=u.profile)||void 0===f?void 0:f.surname]}),(0,d.jsx)("div",{className:"w-6 h-6 flex justify-center items-center rounded-full  text-[#fff] ".concat(b?"bg-[#F02037]":"bg-[#272730]"," text-sm font-normal "),children:N})]}):(0,d.jsxs)("div",{className:"font-normal text-base text-primary-500",children:[null===(m=C())||void 0===m||null===(v=m.profile)||void 0===v?void 0:v.name," ",null===(x=C())||void 0===x||null===(p=x.profile)||void 0===p?void 0:p.surname]}),(0,d.jsxs)("div",{className:"flex justify-between items-center w-full gap-2  ",children:[(0,d.jsx)("div",{className:"font-normal text-sm text-side-300 truncate   ",children:(0,d.jsx)(d.Fragment,{children:null===w||void 0===w||null===(h=w.message)||void 0===h?void 0:h.content})}),(0,d.jsx)("div",{className:"text-sm font-light   text-side-300 box-border whitespace-nowrap",children:(null===w||void 0===w||null===(g=w.message)||void 0===g?void 0:g.create_at)&&new Intl.DateTimeFormat("uk-UA",{hour:"2-digit",minute:"2-digit"}).format(new Date(w.message.create_at))})]})]})]})},f=function(){return(0,d.jsx)("div",{className:"w-full",children:(0,d.jsx)("input",{className:"outline-none rounded-2xl h-12 shadow-sm placeholder-search-100 text-primary-500 p-2 w-full bg-side-100 font-normal ",placeholder:"Search"})})},m=t(3140),v=function(){var e=localStorage.getItem("access"),s=(0,m.s0)(),t=(0,a.useState)(),r=(0,n.Z)(t,2),l=r[0],c=r[1],v=(0,a.useState)(null),x=(0,n.Z)(v,2),p=(x[0],x[1]);(0,o.C)((function(e){return e.auth}));return(0,a.useEffect)((function(){var s,t;return function n(){(s=new WebSocket("ws://192.168.1.5:8000/ws/chat/me?token=".concat(e))).onopen=function(){clearInterval(t)},s.onmessage=function(e){var s=JSON.parse(e.data);c(s)},s.onclose=function(){t=setTimeout(n,3e3)},p(s)}(),function(){s&&s.close()}}),[e]),(0,d.jsxs)("div",{className:"w-1/5 h-screen bg-panel-400 flex flex-col p-2 border-r-[1px] border-[#353540] border-l-[1px]",children:[(0,d.jsxs)("div",{className:"h-16 w-full flex justify-between items-center p-4",children:[(0,d.jsxs)("div",{className:"text-[#fff] text-2xl font-normal",children:["Messages ",(0,d.jsx)("span",{className:"text-lg font-light",children:"48 new"})]}),(0,d.jsx)("img",{src:i,alt:"new message",className:"cursor-pointer"})]}),(0,d.jsx)("div",{className:"p-4",children:(0,d.jsx)(f,{})}),(0,d.jsx)("div",{className:"flex-1 overflow-y-auto space-y-4 p-4",children:(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsx)("div",{className:"text-sm font-light text-side-300",children:"ALL MESSAGES"}),(0,d.jsx)("div",{className:"mt-4 space-y-4",children:l&&(null===l||void 0===l?void 0:l.filter((function(e){return e.message})).map((function(e){return(0,d.jsxs)("div",{onClick:function(){return s("/chat/".concat(e.id))},children:[(0,d.jsx)(u,{chat:e}),(0,d.jsx)("div",{className:" mt-4 w-full h-[1px] bg-panel-300"})]},e.id)})))})]})})]})};var x=t.p+"static/media/logo.1eb3042d1186c2601631fe65c36f55ef.svg";var p=t.p+"static/media/chat.4d41ee9f05e7c70862c75eba65d1f5b1.svg";var h=t.p+"static/media/saved.a4454a88439829a2151e957fed8fc304.svg";var g=t.p+"static/media/chat_one.00c9fdabded1f35f154de3b9b14441b4.svg";var j=t.p+"static/media/chat_group.2570d33950fb4309857fd0c7f7120945.svg";var N=t.p+"static/media/settings.b8e03322514795b4f1295df49d4f8107.svg";var b=t.p+"static/media/logout.d14c784375e45144de7f85d8f25785c9.svg",w=t(3528),y=t(1925),C=function(e){var s=e.img,t=e.size,n=e.sizeBorder;return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("div",{className:"".concat(n,"  rounded-full bg-transparent  flex justify-center items-center border-2 border-purple-100"),children:(0,d.jsx)("img",{src:s?y.v+s:w,className:"".concat(t," rounded-full object-cover"),alt:"avatar"})})})},k=function(e){var s,t,n=e.setSettings,a=e.setContact,i=(new r.Z,(0,m.s0)()),l=(0,o.C)((function(e){return e.auth}));return(0,d.jsxs)("div",{className:"w-[5%] h-full bg-side-100 flex flex-col items-center gap-2",children:[(0,d.jsx)("div",{id:"logo",className:"mt-4",children:(0,d.jsx)("img",{src:x,alt:"logo",className:"w-6"})}),(0,d.jsx)("div",{id:"avatar",className:"mt-4 cursor-pointer",children:(0,d.jsx)(C,{img:null===(s=l.profile)||void 0===s||null===(t=s.avatar[l.profile.avatar.length-1])||void 0===t?void 0:t.image,size:"w-14 h-14 ",sizeBorder:"w-16 h-16 "})}),(0,d.jsxs)("div",{id:"block-1",className:"w-full flex flex-col  items-center justify-center gap-4 mt-6  pr-4 pl-4",children:[(0,d.jsxs)("div",{className:"flex relative cursor-pointer ",children:[(0,d.jsx)("img",{src:p,className:"w-6"}),(0,d.jsx)("div",{className:"absolute w-1 h-full bg-gradient-to-r from-[#108DA6] to-[#47A4ED] left-14 shadow-md"})]}),(0,d.jsxs)("div",{className:"flex relative cursor-pointer ",children:[(0,d.jsx)("img",{src:h,className:"w-6"}),(0,d.jsx)("div",{className:"hidden absolute w-1 h-full bg-gradient-to-r from-[#108DA6] to-[#47A4ED] left-14 shadow-md"})]}),(0,d.jsx)("div",{className:"w-full h-[1px] bg-side-300 mt-2"})]}),(0,d.jsxs)("div",{id:"block-3",className:"w-full flex flex-col  items-center justify-center gap-4 mt-4 pr-4 pl-4 ",children:[(0,d.jsxs)("div",{className:"flex relative cursor-pointer ",children:[(0,d.jsx)("img",{src:g,className:"w-6"}),(0,d.jsx)("div",{className:"hidden absolute w-1 h-full bg-gradient-to-r from-[#108DA6] to-[#47A4ED] left-14 shadow-md"})]}),(0,d.jsxs)("div",{className:"flex relative cursor-pointer ",onClick:function(){return a(!0)},children:[(0,d.jsx)("img",{src:j,className:"w-6"}),(0,d.jsx)("div",{className:"hidden absolute w-1 h-full bg-gradient-to-r from-[#108DA6] to-[#47A4ED] left-14 shadow-md"})]}),(0,d.jsx)("div",{className:"w-full h-[1px] bg-side-300 mt-2"})]}),(0,d.jsxs)("div",{id:"block-finally",className:"w-full flex flex-col  items-center justify-center gap-4 mt-4  pr-4 pl-4 ",children:[(0,d.jsxs)("div",{className:"flex relative cursor-pointer ",onClick:function(){return n(!0)},children:[(0,d.jsx)("img",{src:N,className:"w-6"}),(0,d.jsx)("div",{className:"hidden absolute w-1 h-full bg-gradient-to-r from-[#108DA6] to-[#47A4ED] left-14 shadow-md"})]}),(0,d.jsxs)("div",{onClick:function(){localStorage.setItem("access",""),localStorage.setItem("refresh",""),i("/login")},className:"flex relative cursor-pointer ",children:[(0,d.jsx)("img",{src:b,className:"w-6"}),(0,d.jsx)("div",{className:"hidden absolute w-1 h-full bg-gradient-to-r from-[#108DA6] to-[#47A4ED] left-14 shadow-md"})]})]})]})};var S=t.p+"static/media/close.e68a503c6c00c2a4cdc4a2f2855b1875.svg";var Z=t.p+"static/media/profile.da317797c955e98ee042e893a54e6889.svg";var E=t.p+"static/media/notification.16a5e7508aab7ad1c69e3b5344078cba.svg";var I=t.p+"static/media/lock.cd88ca33838fa073d9bf3450cdcc4b2c.svg";var D=t.p+"static/media/language.384effc3e2a914d3e181b16d0de02ebe.svg",A=function(e){var s,t,n,r,i=e.setSettings,l=e.setProfile,c=(0,a.useRef)(null);(0,a.useEffect)((function(){var e=function(e){c.current&&!c.current.contains(e.target)&&i(!1)};return document.addEventListener("mousedown",e),function(){return document.removeEventListener("mousedown",e)}}),[i]);var u=(0,o.C)((function(e){return e.auth})),f=null===(s=u.profile)||void 0===s||null===(t=s.avatar[u.profile.avatar.length-1])||void 0===t?void 0:t.image;return(0,d.jsx)("div",{className:"absolute w-screen h-screen flex justify-center items-center ",style:{backgroundColor:"rgba(0, 0, 0, 0.45)"},children:(0,d.jsxs)("div",{ref:c,className:"w-1/5 h-fit bg-side-100 p-4 rounded-lg",children:[(0,d.jsxs)("div",{className:"flex p-4 gap-2",children:[(0,d.jsx)("img",{src:S,className:"cursor-pointer",onClick:function(){return i(!1)}}),(0,d.jsx)("div",{className:"text-[#fff] font-normal text-lg",children:"Settings"})]}),(0,d.jsxs)("div",{className:"flex flex-col justify-center items-center gap-2",children:[(0,d.jsx)("img",{src:f?y.v+f:w,className:"w-24 h-24 rounded-full object-cover"}),(0,d.jsxs)("div",{className:"text-[#fff] font-medium text-lg",children:[null===(n=u.profile)||void 0===n?void 0:n.name," ",null===(r=u.profile)||void 0===r?void 0:r.surname]}),(0,d.jsx)("p",{className:"font-light",children:u.nickname})]}),(0,d.jsxs)("div",{className:"flex flex-col  justify-start p-4",children:[(0,d.jsxs)("button",{onClick:function(){l(!0),i(!1)},className:"flex gap-2 w-full hover:bg-side-200 p-4",children:[(0,d.jsx)("img",{src:Z}),(0,d.jsx)("div",{className:"text-[#fff] font-normal",children:"Profile"})]}),(0,d.jsxs)("button",{className:"flex gap-2 w-full hover:bg-side-200 p-4",children:[(0,d.jsx)("img",{src:E}),(0,d.jsx)("div",{className:"text-[#fff] font-normal",children:"Notifications"})]}),(0,d.jsxs)("button",{className:"flex gap-2 w-full hover:bg-side-200 p-4",children:[(0,d.jsx)("img",{src:I}),(0,d.jsx)("div",{className:"text-[#fff] font-normal",children:"Security"})]}),(0,d.jsxs)("button",{className:"flex gap-2 w-full hover:bg-side-200 p-4",children:[(0,d.jsx)("img",{src:D}),(0,d.jsx)("div",{className:"text-[#fff] font-normal",children:"Language"})]})]})]})})},_=t(2943),T=t(2877),F=function(){var e=(0,o.C)((function(e){var s;return null===(s=e.auth.profile)||void 0===s?void 0:s.avatar})),s=e&&e.length>0?e[e.length-1].image:"",t=(0,a.useRef)(null),n=(0,o.T)();return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"relative w-fit h-fit",children:[(0,d.jsx)("img",{src:s?y.v+s:w,className:"w-28 h-28 rounded-full object-cover "}),(0,d.jsx)("input",{type:"file",accept:"image/*",ref:t,className:"hidden",onChange:function(e){var s,t=null===(s=e.target.files)||void 0===s?void 0:s[0];if(t){var a=new FormData;a.append("image",t),n(T.Y.addAvatarUser(a))}}}),(0,d.jsx)("img",{onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},src:_.Z,className:"w-8 h-8 absolute bottom-0 right-1 stroke-[#1C1C23] shadow-sm  cursor-pointer hover:scale-105 "})]})})};var L=t.p+"static/media/arrow-back.7a13bcd7e14130e99e3a869a7e259294.svg",U=function(e){var s,t,r,i,l=e.setSettings,c=e.setProfile,u=e.setImage,f=(0,o.C)((function(e){return e.auth})),m=(0,o.T)(),v=(0,a.useState)((null===(s=f.profile)||void 0===s?void 0:s.bio)||""),x=(0,n.Z)(v,2),p=x[0],h=x[1],g=(0,a.useState)((null===(t=f.profile)||void 0===t?void 0:t.name)||""),j=(0,n.Z)(g,2),N=j[0],b=j[1],w=(0,a.useState)((null===(r=f.profile)||void 0===r?void 0:r.surname)||""),y=(0,n.Z)(w,2),C=y[0],k=y[1],S=(0,a.useState)(f.nickname||""),Z=(0,n.Z)(S,2),E=Z[0],I=Z[1],D=(0,a.useState)((null===(i=f.profile)||void 0===i?void 0:i.birthday)||""),A=(0,n.Z)(D,2),_=A[0],U=A[1],B=(0,a.useState)(!1),O=(0,n.Z)(B,2),P=O[0],Y=O[1];return(0,d.jsx)("div",{className:"absolute w-screen h-screen flex justify-center items-center",style:{backgroundColor:"rgba(0, 0, 0, 0.45)"},children:(0,d.jsxs)("div",{className:"w-1/5 h-fit bg-side-100 p-4 rounded-lg",children:[(0,d.jsxs)("div",{className:"flex gap-2 p-4",children:[(0,d.jsx)("img",{onClick:function(){c(!1),l(!0)},src:L,className:"cursor-pointer"}),(0,d.jsx)("div",{className:"text-[#fff] font-normal text-lg",children:"Profile"})]}),(0,d.jsxs)("div",{id:"profile-images",className:"flex flex-col gap-2 items-center",children:[(0,d.jsx)("div",{onClick:function(){return u(!0)},className:"cursor-pointer",children:(0,d.jsx)(F,{})}),(0,d.jsxs)("div",{className:"text-[#fff] font-normal text-lg",children:[N," ",C]})]}),(0,d.jsx)("div",{className:"flex justify-between items-center p-4",children:(0,d.jsx)("textarea",{value:p,onChange:function(e){return s=e.target.value,h(s),void Y(!0);var s},className:"w-full bg-transparent p-1 font-normal text-[#fff] outline-none",placeholder:"Bio"})}),(0,d.jsx)("div",{className:"w-full bg-side-300 h-[1px]"}),(0,d.jsxs)("div",{className:"flex justify-between items-center p-4",children:[(0,d.jsx)("div",{className:"text-primary-500 font-normal",children:"Name"}),(0,d.jsx)("input",{value:N,onChange:function(e){return s=e.target.value,b(s),void Y(!0);var s},className:"w-2/3 bg-side-300 rounded-full p-1 font-normal text-[#fff] outline-none text-center",placeholder:"John"})]}),(0,d.jsxs)("div",{className:"flex justify-between items-center p-4",children:[(0,d.jsx)("div",{className:"text-primary-500 font-normal",children:"Surname"}),(0,d.jsx)("input",{value:C,onChange:function(e){return s=e.target.value,k(s),void Y(!0);var s},className:"w-2/3 bg-side-300 rounded-full p-1 font-normal text-[#fff] outline-none text-center",placeholder:"Doe"})]}),(0,d.jsxs)("div",{className:"flex justify-between items-center p-4",children:[(0,d.jsx)("div",{className:"text-primary-500 font-normal",children:"Username"}),(0,d.jsx)("input",{value:E,onChange:function(e){return s=e.target.value,I(s),void Y(!0);var s},className:"w-2/3 bg-side-300 rounded-full p-1 font-normal text-[#fff] outline-none text-center",placeholder:"@Yamy"})]}),(0,d.jsxs)("div",{className:"flex justify-between items-center p-4",children:[(0,d.jsx)("div",{className:"text-primary-500 font-normal",children:"Birthday"}),(0,d.jsx)("input",{value:_,onChange:function(e){return s=e.target.value,U(s),void Y(!0);var s},type:"date",className:"w-2/3 bg-side-300 rounded-full p-1 font-normal text-[#fff] outline-none text-center"})]}),P&&(0,d.jsx)("div",{className:"p-4 pt-2 pb-2",children:(0,d.jsx)("button",{onClick:function(){return function(){var e={profile:{bio:p,surname:C,name:N},nickname:E};m(T.Y.updateUser(e)),Y(!1)}()},className:"bg-panel-200 p-1 w-1/2 rounded-lg font-normal ",children:"Save"})})]})})},B=t(4165),O=t(5861);var P=t.p+"static/media/minus-square.43e887d0b5b5ec5f57c83c610c5a3ad3.svg",Y=t(1457);var z=t.p+"static/media/message.37e90600896c8797535ece31c64e9d04.svg",M=function(e){var s=e.setContact,t=(0,m.s0)(),r=localStorage.getItem("access"),i=(0,a.useState)(),c=(0,n.Z)(i,2),u=c[0],f=c[1],v=(0,o.T)();(0,a.useEffect)((function(){var e,s;return function t(){(e=new WebSocket("ws://192.168.1.5:8000/ws/users/test?token=".concat(r))).onopen=function(){clearInterval(s)},e.onmessage=function(e){var s=JSON.parse(e.data);f(null===s||void 0===s?void 0:s.contacts)},e.onclose=function(){s=setTimeout(t,3e3)}}(),function(){e&&e.close()}}),[r]);var x=function(){var e=(0,O.Z)((0,B.Z)().mark((function e(s){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(T.Y.delContactUser({id:s}));case 1:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),p=(0,o.C)((function(e){return e.auth.contacts})),h=function(){var e=(0,O.Z)((0,B.Z)().mark((function e(n){var a,r;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.O.createChatById({user_id:n});case 2:201===(a=e.sent).status&&(r=a.data.id,s(!1),t("/chat/".concat(r)));case 4:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}();return(0,d.jsx)(d.Fragment,{children:null===u||void 0===u?void 0:u.map((function(e){var s,t;return(0,d.jsxs)("div",{className:"flex items-center gap-4 cursor-pointer",children:[(0,d.jsx)(l.n,{img:null===(s=e.profile)||void 0===s||null===(t=s.avatar[e.profile.avatar.length-1])||void 0===t?void 0:t.image,is_online:e.is_online}),(0,d.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,d.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,d.jsx)("div",{className:"text-[#fff] font-normal",children:e.nickname}),(0,d.jsx)("div",{className:"font-normal text-side-300",children:e.is_online?"Online":"Offline"})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("img",{src:z,className:"cursor-pointer",alt:"icon msg",onClick:function(){return h(e.id)}}),(null===p||void 0===p?void 0:p.includes(null===e||void 0===e?void 0:e.id))&&(0,d.jsx)("img",{src:P,alt:"icon del user",className:"cursor-pointer",onClick:function(){return x(e.id)}})]})]})]},e.id)}))})};var R=t.p+"static/media/add-square.156d763af040e0c551373dc34deeb2ce.svg",J=function(e){var s=e.setContact,t=(0,a.useState)(""),r=(0,n.Z)(t,2),c=r[0],u=r[1],f=(0,a.useState)(null),v=(0,n.Z)(f,2),x=v[0],p=v[1],h=(0,a.useRef)(null),g=(0,o.T)(),j=(0,m.s0)();(0,a.useEffect)((function(){var e=function(e){h.current&&!h.current.contains(e.target)&&s(!1)};return document.addEventListener("mousedown",e),function(){return document.removeEventListener("mousedown",e)}}),[s]);var N=function(){var e=(0,O.Z)((0,B.Z)().mark((function e(s){var t;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(s),""!==s){e.next=5;break}p(null),e.next=9;break;case 5:return e.next=7,Y.O.findUser({nickname:s});case 7:200===(t=e.sent).status&&p(t.data);case 9:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),b=function(){var e=(0,O.Z)((0,B.Z)().mark((function e(t){var n,a;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.O.createChatById({user_id:t});case 2:201===(n=e.sent).status&&(a=n.data.id,s(!1),j("/chat/".concat(a)));case 4:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),w=function(){var e=(0,O.Z)((0,B.Z)().mark((function e(s){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(T.Y.addContactUser({id:s}));case 1:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),y=function(){var e=(0,O.Z)((0,B.Z)().mark((function e(s){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(T.Y.delContactUser({id:s}));case 1:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),C=(0,o.C)((function(e){return e.auth.contacts}));return(0,d.jsx)("div",{className:"absolute w-screen h-screen flex justify-center items-center",style:{backgroundColor:"rgba(0, 0, 0, 0.45)"},children:(0,d.jsxs)("div",{ref:h,className:"w-1/5 h-fit bg-side-100 p-4 rounded-lg",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center p-2 gap-2",children:[(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)("img",{className:"cursor-pointer",src:S,alt:"icon close",onClick:function(){return s(!1)}}),(0,d.jsx)("div",{className:"text-[#fff] font-normal text-lg",children:"Contact"})]}),(0,d.jsx)("img",{className:"cursor-pointer",src:i,alt:"add user contact"})]}),(0,d.jsx)("div",{id:"Search-Contact",className:"pr-2 pl-2 pb-4 pt-2",children:(0,d.jsx)("input",{value:c,onChange:function(e){return N(e.target.value)},className:"w-full p-4 rounded-lg bg-side-200 outline-none text-[#fff] font-normal placeholder:text-side-300",placeholder:"Search contacts"})}),(0,d.jsx)("div",{children:x?(0,d.jsx)("div",{className:"flex flex-col p-4 h-[60vh] overflow-y-scroll",children:x.map((function(e){var s,t,n,a,r,i,c;return(0,d.jsxs)("div",{className:"flex justify-between items-center w-full ",children:[(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(l.n,{img:null!==(s=null===(t=e.profile)||void 0===t||null===(n=t.avatar)||void 0===n||null===(a=n[(null===(r=e.profile)||void 0===r?void 0:r.avatar.length)-1])||void 0===a?void 0:a.image)&&void 0!==s?s:"",is_online:!1}),(0,d.jsxs)("div",{className:"flex flex-col pt-1 pb-1",children:[(0,d.jsxs)("div",{className:"font-normal text-[#fff]",children:[null===(i=e.profile)||void 0===i?void 0:i.name," ",null===(c=e.profile)||void 0===c?void 0:c.surname]}),(0,d.jsx)("div",{className:"font-light text-[#1C92B5]",children:e.nickname})]})]}),(0,d.jsxs)("div",{className:"flex gap-2 items-center ",children:[(0,d.jsx)("img",{src:z,className:"cursor-pointer",alt:"add msg",onClick:function(){return b(e.id)}}),!(null!==C&&void 0!==C&&C.includes(e.id))&&(0,d.jsx)("img",{src:R,className:"cursor-pointer",alt:"add user",onClick:function(){return w(e.id)}}),(null===C||void 0===C?void 0:C.includes(e.id))&&(0,d.jsx)("img",{src:P,className:"cursor-pointer",alt:"del user",onClick:function(){return y(e.id)}})]})]},e.id)}))}):(0,d.jsx)("div",{className:"flex flex-col gap-2 p-4 h-[60vh] overflow-y-scroll",children:(0,d.jsx)(M,{setContact:s})})})]})})},W=function(){new r.Z;var e=(0,a.useState)(!1),s=(0,n.Z)(e,2),t=s[0],i=s[1],l=(0,a.useState)(!1),c=(0,n.Z)(l,2),u=c[0],f=c[1],x=(0,a.useState)(!1),p=(0,n.Z)(x,2),h=p[0],g=p[1],j=(0,a.useState)(!1),N=(0,n.Z)(j,2),b=(N[0],N[1]),w=(0,a.useState)(),y=(0,n.Z)(w,2),C=(y[0],y[1],(0,a.useState)()),S=(0,n.Z)(C,2),Z=(S[0],S[1],localStorage.getItem("access")),E=(0,o.T)();return(0,a.useEffect)((function(){var e,s;return function t(){(e=new WebSocket("ws://192.168.1.5:8000/ws/users/status?token=".concat(Z))).onopen=function(){clearInterval(s)},e.onclose=function(){s=setTimeout(t,3e3)}}(),function(){e&&e.close()}}),[]),(0,a.useEffect)((function(){E(T.Y.getMe())}),[Z]),(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"relative w-screen h-screen flex bg-side-100  ",children:[(0,d.jsx)(k,{setSettings:i,setContact:g}),(0,d.jsx)(v,{}),(0,d.jsx)(m.j3,{}),t&&(0,d.jsx)(A,{setSettings:i,setProfile:f}),u&&(0,d.jsx)(U,{setImage:b,setProfile:f,setSettings:i}),h&&(0,d.jsx)(J,{setContact:g})]})})}},3528:function(e,s,t){e.exports=t.p+"static/media/bg_user.dace0770b43f04832c50.webp"}}]);
//# sourceMappingURL=430.e03f1442.chunk.js.map